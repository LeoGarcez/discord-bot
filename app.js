import "dotenv/config";
import express from "express";
import {
    InteractionType,
    InteractionResponseType,
} from "discord-interactions";
import {
    VerifyDiscordRequest,
    DiscordRequest,
} from "./utils.js";
import {
    CHECKWALLET_COMMAND,
    HasGuildCommands,
} from "./commands.js";

import algosdk from "algosdk";

// Create an express app
const app = express();
// Get port, or default to 3000
const PORT = process.env.PORT || 3006;
// Parse request body and verifies incoming requests using discord-interactions package
app.use(express.json({ verify: VerifyDiscordRequest(process.env.PUBLIC_KEY) }));

const assetIds = [
    1017484858, 1017484972, 1017485960, 1017486114, 1017486235, 1017486349,
    1017486480, 1017486581, 1017486697, 1017486828, 1017486930, 1017487067,
    1017487146, 1017487257, 1017487389, 1017487509, 1017487645, 1017487726,
    1017487801, 1017487920, 1017487985, 1017488974, 1017489083, 1017489240,
    1017489364, 1017489466, 1017489547, 1017489638, 1017489783, 1017489907,
    1017490019, 1017490119, 1017490223, 1017490294, 1017490408, 1017490474,
    1017490665, 1017491098, 1017491303, 1017491419, 1017491499, 1017491619,
    1017491705, 1017491798, 1017491889, 1017491992, 1017492074, 1017492150,
    1017492248, 1017492313, 1017492401, 1017492468, 1017492584, 1017492640,
    1017492733, 1017492806, 1017492919, 1017492993, 1017493068, 1017493133,
    1017493232, 1017493320, 1017493396, 1017493493, 1017493585, 1017493658,
    1017493743, 1017493804, 1017493881, 1017493936, 1017494028, 1017494083,
    1017494191, 1017494263, 1017494342, 1017494421, 1017494528, 1017494641,
    1017494729, 1017494811, 1017494913, 1017495001, 1017495069, 1017495158,
    1017495253, 1017495363, 1017495432, 1017495550, 1017495638, 1017495693,
    1017495812, 1017495913, 1017495994, 1017496067, 1017496156, 1017496259,
    1017496363, 1017496442, 1017496532, 1017496617, 1017496714, 1017496778,
    1017496850, 1017496925, 1017497004, 1017497104, 1017497188, 1017497262,
    1017497365, 1017497450, 1017497550, 1017497662, 1017497737, 1017497829,
    1017497942, 1017498003, 1017498084, 1017498149, 1017498256, 1017498380,
    1017498468, 1017498599, 1017498687, 1017498767, 1017498884, 1017498979,
    1017499092, 1017499234, 1017499532, 1017499634, 1017499744, 1017499824,
    1017499876, 1017499991, 1017500060, 1017500135, 1017500256, 1017500339,
    1017500402, 1017500495, 1017500579, 1017500667, 1017500749, 1017500842,
    1017500961, 1017501050, 1017501141, 1017501209, 1017501274, 1017501347,
    1017501408, 1017501530, 1017501604, 1017501786, 1017501858, 1017501985,
    1017502056, 1017502166, 1017502240, 1017502329, 1017502401, 1017502468,
    1017502535, 1017502622, 1017502734, 1017502857, 1017502918, 1017503025,
    1017503088, 1017503173, 1017503248, 1017503340, 1017503432, 1017503511,
    1017503593, 1017503712, 1017503805, 1017503902, 1017503970, 1017504076,
    1017504263, 1017504345, 1017504405, 1017504488, 1017504566, 1017504626,
    1017504702, 1017504815, 1017504882, 1017504956, 1017505058, 1017505144,
    1017505232, 1017505289, 1017505387, 1017505550, 1017505666, 1017505739,
    1017505847, 1017505909, 1017506001, 1017506084, 1017506176, 1017506249,
    1017506357, 1017506453, 1017506540, 1017506609, 1017506837, 1017506936,
    1017507048, 1017507152, 1017507213, 1017507315, 1017507436, 1017507548,
    1017507632, 1017507824, 1017507963, 1017508046, 1017508115, 1017508312,
    1017508496, 1017508659, 1017508734, 1017508848, 1017508901, 1017508983,
    1017509084, 1017509190, 1017509277, 1017509388, 1017509538, 1017509884,
    1017510166, 1017510635, 1017511023, 1017511433, 1017511587, 1017511649,
    1017511744, 1017511888, 1017511993, 1017512070, 1017512162, 1017512237,
    1017512316, 1017512386, 1017512466, 1017512520, 1017512599, 1017512677,
    1017512743, 1017512879, 1017513069, 1017513150, 1017513225, 1017513314,
    1017513456, 1017513533, 1017513629, 1017513851, 1017514428, 1017514932,
    1017515482, 1017516169, 1017516347, 1017516422, 1017516524, 1017516651,
    1017516760, 1017516880, 1017516956, 1017517037, 1017517136, 1017517208,
    1017517278, 1017517377, 1017517480, 1017517547, 1017517611, 1017518015,
    1017518232, 1017518323, 1017518415, 1017518475, 1017518553, 1017518615,
    1017518756, 1017518840, 1017518921, 1017518995, 1017519094, 1017519158,
    1017519282, 1017519366, 1017519481, 1017519543, 1017519628, 1017519685,
    1017519770, 1017519862, 1017519996, 1017520051, 1017520143, 1017520188,
    1017520264, 1017520382, 1017520501, 1017520564, 1017520629, 1017520698,
    1017520793, 1017520854, 1017520920, 1017521007, 1017521117, 1017521236,
    1017521388, 1017521487, 1017521570, 1017521660, 1017521734, 1017521810,
    1017522017, 1017522170, 1017522257, 1017522334, 1017522382, 1017522434,
    1017522505, 1017522564, 1017522667, 1017522733, 1017522801, 1017522869,
    1017522963, 1017523034, 1017523135, 1017523205, 1017523295, 1017523361,
    1017523452, 1017523580, 1017523654, 1017523717, 1017524115, 1017524239,
    1017524312, 1017524392, 1017524482, 1017524561, 1017524639, 1017524728,
    1017524794, 1017524898, 1017524975, 1017525051, 1017525093, 1017525167,
    1017525280, 1017525464, 1017525986, 1017526339, 1017526445, 1017526569,
    1017526686, 1017526762, 1017526918, 1017526980, 1017527056, 1017527139,
    1017527240, 1017527334, 1017527421, 1017527497, 1017527558, 1017527632,
    1017527721, 1017527792, 1017527894, 1017527969, 1017528056, 1017528123,
    1017528220, 1017528311, 1017528393, 1017528476, 1017528552, 1017528637,
    1017528714, 1017528779, 1017528842, 1017528920, 1017529071, 1017529140,
    1017529288, 1017529423, 1017529532, 1017529597, 1017529667, 1017529776,
    1017529987, 1017530122, 1017530203, 1017530512, 1017530606, 1017530680,
    1017530739, 1017530880, 1017530988, 1017531094, 1017531178, 1017531270,
    1017531348, 1017531426, 1017531576, 1017531715, 1017531780, 1017531863,
    1017531925, 1017532113, 1017532205, 1017532304, 1017532405, 1017532525,
    1017532671, 1017532742, 1017532829, 1017532930, 1017533022, 1017533119,
    1017533186, 1017533292, 1017533354, 1017533437, 1017533504, 1017533615,
    1017533706, 1017533798, 1017533929, 1017534015, 1017534151, 1017534257,
    1017534368, 1017534566, 1017534745, 1017534994, 1017535147, 1017535486,
    1017535562, 1017535792, 1017535909, 1017537050, 1017537694, 1017537793,
    1017537945, 1017538029, 1017538115, 1017538201, 1017538300, 1017538372,
    1017538443, 1017538522, 1017538609, 1017538681, 1017538748, 1017538817,
    1017538888, 1017538969, 1017539050, 1017539105, 1017539526, 1017539697,
    1017539792, 1017539875, 1017539944, 1017540023, 1017540085, 1017540193,
    1017540270, 1017540344, 1017540454, 1017540570, 1017540626, 1017540685,
    1017540752, 1017540856, 1017540987, 1017541066, 1017541219, 1017541552,
    1017541671, 1017541776, 1017541891, 1017541975, 1017542018, 1017542106,
    1017542169, 1017542244, 1017542321, 1017542407, 1017542516, 1017542629,
    1017542750, 1017542827, 1017542888, 1017542965, 1017543029, 1017543182,
    1017543254, 1017543344, 1017543415, 1017543492, 1017543567, 1017543640,
    1017543716, 1017543798, 1017543854, 1017543922, 1017544009, 1017544065,
    1017544134, 1017544217, 1017544297, 1017544361, 1017544443, 1017544513,
    1017544591, 1017544656, 1017544722, 1017544793, 1017544855, 1017544925,
    1017545023, 1017545127, 1017545307, 1017545869, 1017546235, 1017546324,
    1017546403, 1017546486, 1017546607, 1017546676, 1017546739, 1017546825,
    1017546891, 1017546976, 1017547056, 1017547139, 1017547211, 1017547290,
    1017547380, 1017547471, 1017547538, 1017547611, 1017547671, 1017547756,
    1017547881, 1017547950, 1017548046, 1017548139, 1017548194, 1017548256,
    1017548314, 1017548433, 1017548553, 1017548609, 1017548699, 1017548769,
    1017548834, 1017548918, 1017548992, 1017549059, 1017549148, 1017549229,
    1017549316, 1017549392, 1017549473, 1017549539, 1017549828, 1017550194,
    1017550674, 1017550963, 1017551080, 1017551150, 1017551232, 1017551314,
    1017551405, 1017551517, 1017551625, 1017551795, 1017551888, 1017551976,
    1017552080, 1017552293, 1017552438, 1017553008, 1017553313, 1017553437,
    1017553517, 1017553612, 1017553716, 1017553874, 1017553994, 1017554106,
    1017554284, 1017554478, 1017554689, 1017554857, 1017554930, 1017555090,
    1017555166, 1017555348, 1017555450, 1017555601, 1017555710, 1017555821,
    1017555924, 1017556022, 1017556129, 1017556292, 1017556368, 1017556471,
    1017556581, 1017556656, 1017556712, 1017556876, 1017556944, 1017557026,
    1017557092, 1017557142, 1017557334, 1017557432, 1017557464, 1017557532,
    1017557768, 1017557899, 1017557983, 1017558198, 1017558362, 1017558545,
    1017558629, 1017558720, 1017558976, 1017559086, 1017559322, 1017559420,
    1017559517, 1017559595, 1017559749, 1017559843, 1017560095, 1017560176,
    1017560268, 1017560445, 1017560673, 1017560773, 1017560912, 1017561025,
    1017561090, 1017561167, 1017561240, 1017561335, 1017561553, 1017561644,
    1017561822, 1017562066, 1017562193, 1017562260, 1017562390, 1017562584,
    1017562650, 1017562738, 1017562813, 1017562912, 1017562982, 1017563100,
    1017563182, 1017563257, 1017563310, 1017563412, 1017563499, 1017563579,
    1017563661, 1017563743, 1017563805, 1017563906, 1017563985, 1017564045,
    1017564140, 1017564227, 1017564328, 1017564372, 1017564447, 1017564553,
    1017564624, 1017564730, 1017564857, 1017564942, 1017565078, 1017565165,
    1017565250, 1017565328, 1017565419, 1017565506, 1017565644, 1017565747,
    1017565850, 1017565984, 1017566055, 1017566166, 1017566244, 1017566350,
    1017566421, 1017566544, 1017566833, 1017567041, 1017567121, 1017567207,
    1017567288, 1017567395, 1017567479, 1017567580, 1017567675, 1017567771,
    1017567875, 1017567974, 1017568082, 1017568176, 1017568309, 1017568404,
    1017568487, 1017568584, 1017568678, 1017568783, 1017568869, 1017568958,
    1017569044, 1017569144, 1017569226, 1017569312, 1017569426, 1017569599,
    1017569764, 1017569885, 1017569956, 1017570008, 1017570080, 1017570161,
    1017570222, 1017570312, 1017570372, 1017570446, 1017570535, 1017570863,
    1017571126, 1017571348, 1017571424, 1017571507, 1017571597, 1017571660,
    1017571728, 1017571816, 1017571894, 1017571960, 1017572065, 1017572171,
    1017572273, 1017572363, 1017572451, 1017572516, 1017572583, 1017572666,
    1017572767, 1017572926, 1017573002, 1017573077, 1017573158, 1017573260,
    1017573404, 1017573597, 1017573989, 1017574044, 1017574133, 1017574277,
    1017574372, 1017574443, 1017574538, 1017574622, 1017574692, 1017574767,
    1017574884, 1017574946, 1017575021, 1017575099, 1017575220, 1017575322,
    1017575420, 1017575520, 1017575586, 1017575685, 1017575747, 1017575824,
    1017575915, 1017575988, 1017576091, 1017576173, 1017576258, 1017576336,
    1017576410, 1017576497, 1017576565, 1017576653, 1017576722, 1017576782,
    1017576860, 1017576914, 1017577002, 1017577139, 1017577295, 1017577461,
    1017577584, 1017577694, 1017577758, 1017577861, 1017577935, 1017578067,
    1017578171, 1017578271, 1017578402, 1017578587, 1017578844, 1017578941,
    1017578999, 1017579076, 1017579240, 1017579340, 1017579437, 1017579589,
    1017579692, 1017579776, 1017579906, 1017579975, 1017580084, 1017580243,
    1017580401, 1017580495, 1017580742, 1017580840, 1017580943, 1017581118,
    1017581249, 1017581353, 1017581489, 1017581578, 1017581711, 1017581843,
    1017581905, 1017581977, 1017582057, 1017582123, 1017582178, 1017582235,
    1017582295, 1017582387, 1017582475, 1017582620, 1017582733, 1017582823,
    1017583037, 1017583485, 1017583825, 1017584275, 1017584461, 1017584634,
    1017584728, 1017584845, 1017584945, 1017585031, 1017585104, 1017585203,
    1017585298, 1017585425, 1017585495, 1017585568, 1017585661, 1017585769,
    1017585836, 1017585942, 1017586045, 1017586171, 1017586240, 1017586302,
    1017586378, 1017586447, 1017586545, 1017586766, 1017586869, 1017586952,
    1017587018, 1017587089, 1017587179, 1017587376, 1017587458, 1017587549,
    1017587615, 1017587697, 1017587765, 1017587868, 1017587941, 1017588010,
    1017588092, 1017588177, 1017588258, 1017588368, 1017588461, 1017588586,
    1017588668, 1017588735, 1017588817, 1017588954, 1017589067, 1017589140,
    1017589200, 1017589295, 1017589346, 1017589449, 1017589489, 1017589679,
    1017589977, 1017590092, 1017590154, 1017590246, 1017590327, 1017590414,
    1017590512, 1017590604, 1017590672, 1017590769, 1017590855, 1017590918,
    1017591000, 1017591073, 1017591158, 1017591233, 1017591337, 1017591420,
    1017591712, 1017591782, 1017591864, 1017591912, 1017592063, 1017592135,
    1017592223, 1017592314, 1017592420, 1017592493, 1017592593, 1017592681,
    1017592763, 1017592832, 1017592908, 1017593021, 1017593101, 1017593166,
    1017593244, 1017593332, 1017593415, 1017593468, 1017593563, 1017593656,
    1017593720, 1017593812, 1017593874, 1017593955, 1017594067, 1017594150,
    1017594247, 1017594323, 1017594406, 1017594495, 1017594575, 1017594665,
    1017594744, 1017594841, 1017594898, 1017595024, 1017595096, 1017595157,
    1017595226, 1017595295, 1017595397, 1017595493, 1017595568, 1017595642,
    1017595725, 1017595810, 1017595862, 1017595955, 1017596030, 1017596147,
    1017596227, 1017596489, 1017596552, 1017596981, 1017597169, 1017597331,
    1017597442, 1017597828, 1017597967, 1017598111, 1017598211, 1017598305,
    1017598371, 1017598492, 1017598590, 1017598658, 1017598762, 1017598846,
    1017598964, 1017599048, 1017599111, 1017599245, 1017599380, 1017599508,
    1017599588, 1017599686, 1017599750, 1017599841, 1017599911, 1017600018,
    1017600121, 1017600272, 1017600333, 1017600449, 1017600549, 1017600629,
    1017600710, 1017600810, 1017600910, 1017600989, 1017601061, 1017601150,
    1017601248, 1017601379, 1017601464, 1017601552, 1017601653, 1017601786,
    1017601856, 1017601967, 1017602046, 1017602190, 1017602300, 1017602380,
    1017602612, 1017602691, 1017602811, 1017602911, 1017603035, 1017603178,
    1017603268, 1017603404, 1017603519, 1017603625, 1017603691, 1017605227,
    1017605360, 1017605409, 1017605486, 1017605573, 1017605637, 1017605728,
    1017605819, 1017605901, 1017606018, 1017606105, 1017606216, 1017606382,
    1017606493, 1017606578, 1017606685, 1017606773, 1017606870, 1017606934,
    1017608020, 1017608147, 1017608544, 1017608694, 1017608811, 1017608968,
    1017609085, 1017609206, 1017609324, 1017609438, 1017609539, 1017609669,
    1017609774, 1017609867, 1017609958, 1017610115, 1017610264, 1017610447,
    1017610551, 1017610676, 1017610801, 1017610920, 1017611038, 1017611152,
    1017611297, 1017611442, 1017611568, 1017611690, 1017611810, 1017611918,
    1017612227, 1017612369, 1017612518, 1017612641, 1017612901, 1017613089,
    1017613271, 1017613373, 1017613503, 1017613618, 1017613762, 1017613855,
    1017613966, 1017614080, 1017614257, 1017614378, 1017614485, 1017614613,
    1017614772, 1017614856, 1017614984, 1017615097, 1017615202, 1017615304,
    1017615425, 1017615574, 1017615776, 1017615900, 1017616019, 1017616204,
    1017616465, 1017616580, 1017616683, 1017616777, 1017616890, 1017617028,
    1017617180, 1017617286, 1017617394, 1017617512, 1017617615, 1017617712,
    1017617835, 1017617938, 1017618071, 1017618191, 1017618306, 1017618426,
    1017618535, 1017618645, 1017618818, 1017618924, 1017619008, 1017619090,
    1017619231, 1017619310, 1017619468, 1017619531, 1017619654, 1017619796,
    1017619897, 1017620018, 1017620161, 1017620293, 1017620455, 1017620651,
    1017620784, 1017620983, 1017621101, 1017621225, 1017621343, 1017621430,
    1017621536, 1017621646, 1017621766, 1017621928, 1017622061, 1017622177,
    1017622299, 1017622433, 1017622559, 1017622694, 1017622788, 1017622907,
    1017623075, 1017623206, 1017623311, 1017623426, 1017623566, 1017623721,
    1017623819, 1017623921, 1017624049, 1017624138, 1017624260, 1017624354,
    1017624464, 1017624590, 1017624697, 1017624789, 1017624887, 1017625007,
    1017625095, 1017625199, 1017625309, 1017625413, 1017625518, 1017625601,
    1017625703, 1017625860, 1017625990, 1017626093, 1017626197, 1017626307,
    1017626457, 1017626566, 1017626676, 1017626804, 1017626922, 1017627831,
    1017628576, 1017628837, 1017629002, 1017629542, 1017630073, 1017630304,
    1017630545, 1017630716, 1017630861, 1017631001, 1017631132, 1017631241,
    1017631518, 1017631836, 1017632252, 1017632691, 1017633104, 1017633528,
    1017633906, 1017634502, 1017634783, 1017635192, 1017635399, 1017635607,
    1017636470, 1017636671, 1017636829, 1017636937, 1017637089, 1017637319,
    1017637491, 1017637601, 1017637717, 1017637850, 1017638001, 1017638726,
    1017638909, 1017639024, 1017639092, 1017639263, 1017639503, 1017639724,
    1017639873, 1017639994, 1017640096, 1017640174, 1017640254, 1017640326,
    1017640392, 1017640551, 1017640771, 1017640890, 1017640969, 1017641048,
    1017641232, 1017641326, 1017641469, 1017641626, 1017641749, 1017641854,
    1017642052, 1017642197, 1017642326, 1017642433, 1017642573, 1017642720,
    1017642817, 1017642912, 1017643008, 1017643088, 1017643172, 1017643259,
    1017643334, 1017643411, 1017643472, 1017643561, 1017643639, 1017643777,
    1017643940, 1017644068, 1017644184, 1017644313, 1017644418, 1017644515,
    1017644623, 1017644791, 1017644896, 1017645019, 1017645323, 1017645454,
    1017645570, 1017645736, 1017645880, 1017646010, 1017646125, 1017646287,
    1017646419, 1017646545, 1017646710, 1017646835, 1017646982, 1017647123,
    1017647267, 1017647735, 1017647873, 1017647998, 1017648103, 1017648251,
    1017648382, 1017648524, 1017648630, 1017648748, 1017648889, 1017649076,
    1017649253, 1017649352, 1017649453, 1017649605, 1017649799, 1017649936,
    1017650079, 1017650203, 1017650401, 1017650521, 1017650697, 1017650811,
    1017650939, 1017651082, 1017651334, 1017651494, 1017651594, 1017651696,
    1017651900, 1017652055, 1017652176, 1017652303, 1017652434, 1017652544,
    1017652667, 1017652780, 1017652909, 1017653023, 1017653144, 1017653286,
    1017653448, 1017653574, 1017653671, 1017653807, 1017653916, 1017654042,
    1017654214, 1017654328, 1017654426, 1017654526, 1017654632, 1017654747,
    1017654887, 1017654980, 1017655092, 1017655216, 1017655345, 1017655440,
    1017655495, 1017655584, 1017655657, 1017655761, 1017655839, 1017655930,
    1017656012, 1017656095, 1017656156, 1017656254, 1017656379, 1017656461,
    1017656574, 1017656694, 1017656760, 1017656881, 1017656963, 1017657062,
    1017657145, 1017657231, 1017657339, 1017657427, 1017657517, 1017657607,
    1017657679, 1017657768, 1017657886, 1017658033, 1017658120, 1017658223,
    1017658296, 1017658387, 1017658471, 1017658563, 1017658657, 1017658758,
    1017658817, 1017658892, 1017658979, 1017659095, 1017659187, 1017659282,
    1017659384, 1017659490, 1017659596, 1017659678, 1017659753, 1017659830,
    1017659892, 1017659994, 1017660087, 1017660178, 1017660252, 1017660367,
    1017660458, 1017660798, 1017661066, 1017661237, 1017661403, 1017661493,
    1017661561, 1017661668, 1017661771, 1017661832, 1017661936, 1017661994,
    1017662094, 1017662187, 1017662271, 1017662357, 1017662426, 1017662500,
    1017662660, 1017662756, 1017662847, 1017662910, 1017662980, 1017663073,
    1017663183, 1017663369, 1017663466, 1017663554, 1017663717, 1017663801,
    1017663898, 1017663981, 1017664047, 1017664135, 1017664216, 1017664293,
    1017664373, 1017664473, 1017664576, 1017664668, 1017664765, 1017664859,
    1017664933, 1017665002, 1017665092, 1017665186, 1017665247, 1017665332,
    1017665437, 1017665593, 1017665713, 1017665803, 1017665877, 1017665931,
    1017666027, 1017666109, 1017666188, 1017666273, 1017666337, 1017666424,
    1017666532, 1017666592, 1017666733, 1017666808, 1017666906, 1017666962,
    1017667042, 1017667118, 1017667187, 1017667238, 1017667318, 1017667395,
    1017667470, 1017667548, 1017667624, 1017667736, 1017667821, 1017667901,
    1017668053, 1017668152, 1017668286, 1017668386, 1017668496, 1017668619,
    1017668704, 1017668881, 1017669048, 1017669292, 1017669400, 1017669498,
    1017669613, 1017669785, 1017669964, 1017670071, 1017670231, 1017670314,
    1017670377, 1017670444, 1017670531, 1017670606, 1017670672, 1017670798,
    1017670880, 1017670950, 1017671009, 1017671074, 1017671209, 1017671291,
    1017671408, 1017671564, 1017671674, 1017671784, 1017671904, 1017671970,
    1017672065, 1017672136, 1017672195, 1017672281, 1017672342, 1017672419,
    1017672515, 1017672598, 1017672671, 1017672779, 1017672862, 1017673329,
    1017673852, 1017674088, 1017674276, 1017674401, 1017674539, 1017674691,
    1017674763, 1017674848, 1017674900, 1017675009, 1017675115, 1017675210,
    1017675341, 1017675441, 1017675571, 1017675774, 1017675920, 1017675998,
    1017676130, 1017676224, 1017676327, 1017676425, 1017676571, 1017676673,
    1017676964, 1017677195, 1017677340, 1017677541, 1017677674, 1017677746,
    1017677823, 1017677904, 1017677990, 1017678047, 1017678145, 1017678221,
    1017678318, 1017678423, 1017678496, 1017678567, 1017678662, 1017678722,
    1017678817, 1017679128, 1017679217, 1017679330, 1017679487, 1017679598,
    1017679723, 1017679817, 1017679920, 1017680008, 1017680114, 1017680258,
    1017680384, 1017680538, 1017680663, 1017680879, 1017681032, 1017681146,
    1017681269, 1017681398, 1017681550, 1017681683, 1017681822, 1017681960,
    1017682058, 1017682200, 1017682361, 1017682565, 1017682828, 1017682978,
    1017683271, 1017683421, 1017683706, 1017683797, 1017683909, 1017684105,
    1017684369, 1017684534, 1017684617, 1017684708, 1017684811, 1017684902,
    1017684999, 1017685085, 1017685181, 1017685262, 1017685399, 1017685524,
    1017685608, 1017685842, 1017685988, 1017686156, 1017686252, 1017686369,
    1017686516, 1017686593, 1017686721, 1017686833, 1017686943, 1017687039,
    1017687282, 1017687396, 1017687462, 1017687558, 1017687633, 1017687723,
    1017687836, 1017687941, 1017688043, 1017688124, 1017688196, 1017688287,
    1017688412, 1017688660, 1017688809, 1017688886, 1017689118, 1017689464,
    1017689534, 1017689616, 1017689691, 1017689762, 1017689837, 1017689957,
    1017690060, 1017690129, 1017690227, 1017690305, 1017690389, 1017690504,
    1017690580, 1017690647, 1017690728, 1017690790, 1017690923, 1017691062,
    1017691153, 1017691281, 1017691418, 1017691518, 1017691596, 1017691667,
    1017691740, 1017691965, 1017692319, 1017692544, 1017692637, 1017692756,
    1017692881, 1017693017, 1017693118, 1017693236, 1017693313, 1017693409,
    1017693554, 1017693704, 1017693848, 1017693935, 1017694058, 1017694139,
    1017694258, 1017694331, 1017694424, 1017694529, 1017694592, 1017694740,
    1017694902, 1017694974, 1017695067, 1017695182, 1017695334, 1017695421,
    1017695518, 1017695594, 1017695741, 1017695814, 1017695941, 1017696036,
    1017696118, 1017696194, 1017696321, 1017696421, 1017696520, 1017696606,
    1017696726, 1017696894, 1017696995, 1017697074, 1017697161, 1017697297,
    1017697377, 1017697583, 1017697671, 1017698089, 1017698164, 1017698235,
    1017698324, 1017698395, 1017698446, 1017698608, 1017698757, 1017698834,
    1017698972, 1017699088, 1017699177, 1017699290, 1017699385, 1017699469,
    1017699532, 1017699688, 1017699835, 1017699910, 1017699970, 1017700073,
    1017700203, 1017700313, 1017700467, 1017700571, 1017700713, 1017700834,
    1017700893, 1017700976, 1017701089, 1017701292, 1017701360, 1017701443,
    1017701516, 1017701594, 1017701689, 1017701783, 1017701872, 1017701966,
    1017702039, 1017702106, 1017702261, 1017702326, 1017702403, 1017702483,
    1017702579, 1017702688, 1017702787, 1017702859, 1017702958, 1017703168,
    1017703288, 1017703368, 1017703470, 1017703578, 1017703658, 1017703730,
    1017703810, 1017703867, 1017703942, 1017704062, 1017704254, 1017704424,
    1017704554, 1017704614, 1017704692, 1017704789, 1017704842, 1017704938,
    1017705009, 1017705076, 1017705148, 1017705311, 1017705387, 1017705515,
    1017705590, 1017705692, 1017705791, 1017705851, 1017705920, 1017706002,
    1017706104, 1017706176, 1017706250, 1017706341, 1017706424, 1017706494,
    1017706583, 1017706665, 1017706773, 1017706855, 1017706928, 1017707018,
    1017707090, 1017707183, 1017707263, 1017707347, 1017707580, 1017707694,
    1017707819, 1017707901, 1017708047, 1017708167, 1017708232, 1017708326,
    1017708406, 1017708521, 1017708594, 1017708711, 1017708819, 1017708905,
    1017708972, 1017709063, 1017709131, 1017709227, 1017709312, 1017709387,
    1017709464, 1017709556, 1017709645, 1017709744, 1017709815, 1017709909,
    1017710018, 1017710309, 1017710450, 1017710517, 1017710669, 1017710765,
    1017710852, 1017710933, 1017711005, 1017711060, 1017711164, 1017711238,
    1017711322, 1017711422, 1017711514, 1017711636, 1017711728, 1017711833,
    1017711973, 1017712088, 1017712165, 1017712256, 1017712332, 1017712441,
    1017712527, 1017712650, 1017712731, 1017712804, 1017712884, 1017712962,
    1017713071, 1017713157, 1017713255, 1017713340, 1017713425, 1017713504,
    1017713574, 1017713670, 1017713738, 1017713814, 1017714006, 1017714082,
    1017714209, 1017714303, 1017714387, 1017714466, 1017714527, 1017714620,
    1017714914, 1017715021, 1017715087, 1017715156, 1017715228, 1017715324,
    1017715391, 1017715519, 1017715590, 1017715653, 1017715716, 1017715805,
    1017715863, 1017715925, 1017715990, 1017716060, 1017716167, 1017716245,
    1017716322, 1017716525, 1017716675, 1017716745, 1017716813, 1017716914,
    1017716999, 1017717070, 1017717219, 1017717296, 1017717377, 1017717477,
    1017717698, 1017717809, 1017717896, 1017718098, 1017718156, 1017718287,
    1017718396, 1017718479, 1017718685, 1017718796, 1017718879, 1017718950,
    1017719050, 1017719130, 1017719209, 1017719310, 1017719427, 1017719573,
    1017719873, 1017719965, 1017720066, 1017720144, 1017720232, 1017720305,
    1017720387, 1017720455, 1017720545, 1017720634, 1017720721, 1017720800,
    1017721094, 1017721310, 1017721407, 1017721996, 1017722105, 1017722182,
    1017722276, 1017722346, 1017722426, 1017722492, 1017722600, 1017722670,
    1017722757, 1017722815, 1017722886, 1017722966, 1017723042, 1017723118,
    1017723199, 1017723252, 1017723348, 1017723431, 1017723521, 1017723582,
    1017723654, 1017723740, 1017723856, 1017723971, 1017724072, 1017724150,
    1017724211, 1017724500, 1017724573, 1017724649, 1017724978, 1017725096,
    1017725244, 1017725313, 1017725413, 1017725529, 1017725604, 1017725757,
    1017725921, 1017725992, 1017726073, 1017726161, 1017726311, 1017726396,
    1017726486, 1017726591, 1017726649, 1017726741, 1017726800, 1017726872,
    1017727110, 1017727260, 1017727345, 1017727454, 1017727558, 1017727616,
    1017727698, 1017727767, 1017727840, 1017727924, 1017728018, 1017728106,
    1017728206, 1017728314, 1017728399, 1017728474, 1017728548, 1017728624,
    1017728678, 1017728764, 1017728888, 1017728970, 1017729050, 1017729134,
    1017729274, 1017729356, 1017729418, 1017729528, 1017729589, 1017729650,
    1017729729, 1017729829, 1017729929, 1017730036, 1017730216, 1017730344,
    1017730438, 1017730506, 1017730568, 1017730652, 1017730840, 1017730943,
    1017731022, 1017731098, 1017731199, 1017731296, 1017731368, 1017731434,
    1017731609, 1017731669, 1017731799, 1017731901, 1017731958, 1017732038,
    1017732112, 1017732178, 1017732263, 1017732337, 1017732446, 1017732573,
    1017732701, 1017732764, 1017732874, 1017732950, 1017733042, 1017733153,
    1017733285, 1017733375, 1017733459, 1017733586, 1017733780, 1017733851,
    1017734037, 1017734115, 1017734214, 1017734318, 1017734390, 1017734440,
    1017734516, 1017734594, 1017734696, 1017734788, 1017734876, 1017734968,
    1017735064, 1017735126, 1017735221, 1017735298, 1017735345, 1017735461,
    1017735548, 1017735622, 1017735692, 1017735777, 1017735847, 1017735925,
    1017736055, 1017736149, 1017736211, 1017736304, 1017736366, 1017736443,
    1017736504, 1017736573, 1017736640, 1017736715, 1017736781, 1017736859,
    1017736919, 1017737023, 1017737097, 1017737201, 1017737301, 1017737394,
    1017737562, 1017737693, 1017737767, 1017737864, 1017737954, 1017738059,
    1017738249, 1017738349, 1017738414, 1017738514, 1017738674, 1017738836,
    1017738963, 1017739050, 1017739387, 1017739518, 1017739587, 1017739681,
    1017739795, 1017739867, 1017739922, 1017740023, 1017740127, 1017740186,
    1017740296, 1017740366, 1017740449, 1017740516, 1017740604, 1017740703,
    1017740773, 1017740822, 1017740911, 1017741005, 1017741069, 1017741148,
    1017741266, 1017741341, 1017741395, 1017741481, 1017741548, 1017741620,
    1017741699, 1017741874, 1017741968, 1017742060, 1017742146, 1017742226,
    1017742314, 1017742430, 1017742523, 1017742592, 1017742664, 1017742747,
    1017742815, 1017742885, 1017742948, 1017743000, 1017743075, 1017743174,
    1017743270, 1017743339, 1017743424, 1017743491, 1017743573, 1017743671,
    1017743771, 1017743894, 1017743971, 1017744061, 1017744150, 1017744232,
    1017744306, 1017744370, 1017744450, 1017744510, 1017744575, 1017744637,
    1017744705, 1017744776, 1017744863, 1017744923, 1017745000, 1017745084,
    1017745169, 1017745235, 1017745311, 1017745380, 1017745450, 1017745523,
    1017745601, 1017745709, 1017745874, 1017745956, 1017746033, 1017746140,
    1017746298, 1017746506, 1017746705, 1017746866, 1017747007, 1017747319,
    1017747537, 1017747710, 1017747791, 1017747872, 1017748018, 1017748113,
    1017748233, 1017748309, 1017748380, 1017748493, 1017748635, 1017748693,
    1017748784, 1017748903, 1017749033, 1017749146, 1017749212, 1017749295,
    1017749377, 1017749464, 1017749552, 1017749716, 1017749866, 1017749950,
    1017750042, 1017750101, 1017750187, 1017750247, 1017750373, 1017750467,
    1017750547, 1017750617, 1017750698, 1017750794, 1017750896, 1017750968,
    1017751034, 1017751095, 1017751192, 1017751253, 1017751351, 1017751410,
    1017751505, 1017751561, 1017751660, 1017751713, 1017751823, 1017751925,
    1017752036, 1017752141, 1017752240, 1017752294, 1017752398, 1017752472,
    1017752544, 1017752631, 1017752680, 1017752757, 1017752814, 1017752886,
    1017752970, 1017753475, 1017754057, 1017754279, 1017754584, 1017754782,
    1017754927, 1017755375, 1017755685, 1017755822, 1017755924, 1017756056,
    1017756166, 1017756254, 1017756346, 1017756458, 1017756547, 1017756701,
    1017756783, 1017756865, 1017756941, 1017757023, 1017757096, 1017757199,
    1017757324, 1017757412, 1017757492, 1017757559, 1017757643, 1017757721,
    1017757801, 1017757886, 1017757978, 1017758046, 1017758163, 1017758255,
    1017758344, 1017758421, 1017758515, 1017758570, 1017759651, 1017759873,
    1017759971, 1017760281, 1017760471, 1017760607, 1017760845, 1017761082,
    1017761314, 1017761511, 1017761624, 1017761736, 1017761824, 1017761907,
    1017762082, 1017762201, 1017762382, 1017762493, 1017762572, 1017762640,
    1017762774, 1017762851, 1017762937, 1017763010, 1017763072, 1017763193,
    1017763311, 1017763376, 1017763464, 1017763611, 1017763716, 1017763786,
    1017763854, 1017763926, 1017764059, 1017764109, 1017764205, 1017764321,
    1017764400, 1017764515, 1017764628, 1017764744, 1017764854, 1017764991,
    1017765073, 1017765218, 1017765291, 1017765337, 1017765417, 1017765535,
    1017765639, 1017765702, 1017765772, 1017765854, 1017765943, 1017766028,
    1017766106, 1017766204, 1017766285, 1017766392, 1017766513, 1017766759,
    1017766962, 1017767143, 1017767381, 1017767592, 1017767814, 1017767981,
    1017768190, 1017768385, 1017768564, 1017768722, 1017768852, 1017769049,
    1017769228, 1017769396, 1017769592, 1017769766, 1017769943, 1017770114,
    1017770305, 1017770481, 1017770642, 1017770887, 1017771475, 1017771938,
    1017772371, 1017772771, 1017773222, 1017773768, 1017774030, 1017774203,
    1017774374, 1017774530, 1017774658, 1017774748, 1017775041, 1017775206,
    1017775299, 1017775401, 1017775492, 1017775576, 1017775666, 1017775762,
    1017775842, 1017775949, 1017776011, 1017776090, 1017776142, 1017776255,
    1017776372, 1017776448, 1017776518, 1017776639, 1017776717, 1017776833,
    1017776926, 1017777011, 1017777086, 1017777184, 1017777261, 1017777367,
    1017777426, 1017777514, 1017777665, 1017777776,
];

/**
 * Interactions endpoint URL where Discord will send HTTP requests
 */
app.post("/interactions", async function (req, res) {
    // Interaction type and data
    const { type, id, data } = req.body;

    /**
     * Handle verification requests
     */
    if (type === InteractionType.PING) {
        return res.send({ type: InteractionResponseType.PONG });
    }

    /**
     * Handle slash command requests
     * See https://discord.com/developers/docs/interactions/application-commands#slash-commands
     */
    if (type === InteractionType.APPLICATION_COMMAND) {
        const { name } = data;

        if (name === "checkwallet") {
            const userId = req.body.member.user.id;
            const wallet = data.options[0].value;

            console.log(userId, wallet, req.body);

            const algod = new algosdk.Algodv2(
                "",
                "https://node.algoexplorerapi.io/",
                443
            );

            const user = await algod.accountInformation(wallet).do();
            let counter = 0;

            user.assets.map((item) => {
                if (item.amount === 1 && assetIds.includes(item["asset-id"])) {
                    counter++;
                }
            });

            console.log("user", user.address, counter);

            if (counter <= 0) {
                return res.send({
                    type: InteractionResponseType.CHANNEL_MESSAGE_WITH_SOURCE,
                    data: {
                        // Fetches a random emoji to send from a helper function
                        content: `Damn, this wallet haven't any Musii Sea Lion <@${userId}> 😭 To be part of our community just buy a Musii Sea Lion`,
                    },
                });
            } else if (counter < 3) {
                const endpoint = `/guilds/${
                    req.body.guild_id
                }/members/${userId}/roles/${"1070423552316162130"}`;

                await DiscordRequest(endpoint, { method: "PUT" });

                return res.send({
                    type: InteractionResponseType.CHANNEL_MESSAGE_WITH_SOURCE,
                    data: {
                        // Fetches a random emoji to send from a helper function
                        content: `Awesome, now you are being part of Sea-Lions-chat <@${userId}> :seal:`,
                    },
                });
            } else if (counter < 5) {
                const endpoint = `/guilds/${
                    req.body.guild_id
                }/members/${userId}/roles/${"1070424771415785533"}`;

                await DiscordRequest(endpoint, { method: "PUT" });

                return res.send({
                    type: InteractionResponseType.CHANNEL_MESSAGE_WITH_SOURCE,
                    data: {
                        // Fetches a random emoji to send from a helper function
                        content: `Awesome, now you are being part of Sea-Lions-chat + Giveaway Group <@${userId}> :seal: :gift:`,
                    },
                });
            } else if (counter < 10) {
                const endpoint = `/guilds/${
                    req.body.guild_id
                }/members/${userId}/roles/${"1070424325368324216"}`;

                await DiscordRequest(endpoint, { method: "PUT" });

                return res.send({
                    type: InteractionResponseType.CHANNEL_MESSAGE_WITH_SOURCE,
                    data: {
                        // Fetches a random emoji to send from a helper function
                        content: `Awesome, now you are being part of Sea-Lions-chat + Giveaway Group + Musers-Curators-chat <@${userId}> :seal: :gift: :musical_note: `,
                    },
                });
            } else {
                const endpoint = `/guilds/${
                    req.body.guild_id
                }/members/${userId}/roles/${"1070424597410877453"}`;

                await DiscordRequest(endpoint, { method: "PUT" });

                return res.send({
                    type: InteractionResponseType.CHANNEL_MESSAGE_WITH_SOURCE,
                    data: {
                        // Fetches a random emoji to send from a helper function
                        content: `Awesome, now you are being part of Sea-Lions-chat + Giveaway Group + Musers-Curators-chat + Degen-chat <@${userId}> :seal: :gift: :musical_note: :whale:`,
                    },
                });
            }
        }
    }
});

app.listen(PORT, () => {
    console.log("Listening on port", PORT);

    // Check if guild commands from commands.js are installed (if not, install them)
    HasGuildCommands(process.env.APP_ID, process.env.GUILD_ID, [
        CHECKWALLET_COMMAND,
    ]);
});
